<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		
		<link rel="stylesheet" type="text/css" href="../bootstrap/css/bootstrap.css"/>
		<script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
		<script src="../bootstrap/js/bootstrap.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/axios.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/vue.min.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div id="app">
			<nav class="navbar navbar-default" style="background-color: black;">
				<ul class="nav nav-tabs">
					<li style="margin-left: 60px;" role="presentation">
					  <a>欢迎进入股票分析系统</a>	
					</li>
				  <li role="presentation"><a href="index.html">首页</a></li>
				  <li role="presentation"><a href="klineshowdata.html">展示页</a></li>
				  <li role="presentation" class="active"><a href="#">注册</a></li>
				  <li role="presentation"><a href="login.html">登录</a></li>
				  <li style="float: right;margin-right: 100px;" role="presentation">
					 <img src="../img/a.jpg"
					  class="img-circle" width="50" height="50">  
				  </li>
				</ul>
			</nav>	
			
			
			<form class="form-horizontal" role="form">
				<div class="form-group">
					<!--col-sm-4  中的4是占用整个浏览器窗口12分之4的宽度-->
					<label for="firstname" class="col-sm-4 control-label">用户名</label>
					<div class="col-sm-3">
						<input type="text" v-model="userName" class="form-control" id="firstname1"  placeholder="请输入用户名">
					</div>
				</div>
				
				<div class="form-group">
					<!--col-sm-4  中的4是占用整个浏览器窗口12分之4的宽度-->
					<label for="firstname" class="col-sm-4 control-label">密码</label>
					<div class="col-sm-3">
						<input type="password" v-model="password1"  class="form-control" id="firstname2"  placeholder="请输入密码">
					</div>
				</div>
				
				
				<div class="form-group">
					<!--col-sm-4  中的4是占用整个浏览器窗口12分之4的宽度-->
					<label for="firstname" class="col-sm-4 control-label">重复密码</label>
					<div class="col-sm-3">
						<input type="password"  v-model="password2" class="form-control" id="firstname3" 
							   placeholder="请再次输入密码">
					</div>
				</div>
				
				
				
				<div class="form-group">
					<!--col-sm-4  中的4是占用整个浏览器窗口12分之4的宽度-->
					<label for="firstname" class="col-sm-4 control-label">请选择头像上传</label>
					<div class="col-sm-3">
						<input type="file" class="form-control-file" id="file">
					</div>
				</div>
				
				
				 
				
				<div class="form-group">
					<!--col-sm-4  中的4是占用整个浏览器窗口12分之4的宽度-->
					<label for="firstname" class="col-sm-4 control-label">手机号</label>
					<div class="col-sm-3">
						<input type="text"  v-model="phone" class="form-control" id="firstname4" 
							   placeholder="请输入手机号">
					</div>
				</div>
				
				
				<div class="form-group">
					<label for="firstname" class="col-sm-6 control-label">  </label>
					<div class="col-sm-3">
						<button  @click="register" type="button" class="btn btn-default">完成注册</button>
					</div>
				</div>
				
			</form>
			
			
			<div id="main" style="width: 100%;height:600px;"></div>
		</div>
		
		<script type="text/javascript">
			new Vue({
				el:"#app",
				data:{
					userName:"",
					password1:"",
					password2:"",
					phone:""
				},
				methods:{
					register(){
						
						if(this.userName!=""&&this.password1!=""&&this.password2!=""){
							if(this.password1==this.password2){
								//ajax 调用 web服务向数据库保存用户注册的信息  
								
								
								
								var file = document.getElementById("file").files[0]
								
								let param = new FormData()
								param.append("username",this.userName)
								param.append("password",this.password1)
								param.append("phone",this.phone)
								param.append("file",file)
								
								var config = {
								  headers: {'Content-Type': 'multipart/form-data'}
								}
								
								axios.post("http://127.0.0.1/register",param,config)
								.then(response => {
									if(response.data){
										//跳转到 登录页面
										window.location.href="./login.html"
									}
								})
								
							}else{
								alert("用户名输入的密码不一致")
							}
						}else{
							alert("用户名和密码不能为空")
						}
						
					}
				}
			})
		</script>
	  
	   
	 
	
	</body>
</html>
